# online-shop

Веб-приложение представляет собой витрину товаров, которые пользователь может положить в корзину и купить.

Приложение состоит из семи основных частей (модулей): 
* страница витрины товаров, доступных для просмотра и покупки; 
* страница товара; 
* страница корзины покупателя; 
* страница всех заказов; 
* страница заказа; 
* сервис покупки;
* страница загрузки товара в витрину;
* страница регистрации пользователя.

## Страница витрины товаров 
* список товаров, доступных для заказа, с пагинацией, возможностью поиска с фильтрацией по названию и сортировкой по цене, алфавиту.
Страница доступна зарегистрированным и незарегистрированным пользователям.

## Страница карточки товара
* название, 
* картинка, 
* описание товара,
* цена товара.</br>
Переход на страницу происходит при нажатии на товар. Существует возможность положить товар в корзину/удалить его,
и изменить количество товара в корзине. Страница доступна зарегистрированным и незарегистрированным пользователям.

## Корзина
* список положенных в корзину товаров, 
* их количество, 
* цена каждого товара и
* общая цена всей корзины.</br>
Переход в корзину возможен с любой веб-страницы с товарами. Есть возможность удалить товар из корзины, изменить его количество;
есть кнопка оформления заказа (кнопка доступна при положительном балансе с учетом стоимости товаров в корзине). При нажатии на кнопку оформления заказа происходит эмуляция оформления заказа. Страница доступна только зарегистрированным пользователям. Пользователь видет в корзине только добавленные им товары.

## Страница заказов
* список всех оформленных заказов, 
* сумма каждого заказа.</br>
Переход на страницу заказов возможен с любой веб-страницы с товарами. 
Страница доступна только зарегистрированным пользователям. Пользователь видет в корзине только список своих заказов.

## Страница заказа
* список купленных товаров,
* сумма за каждый товар,
* общая сумма заказа.</br>
Переход на страницу заказа осуществляется при нажатии на заказ на странице заказов. 
Страница доступна только зарегистрированным пользователям.

## Страница оформленного заказа
Переход на страницу оформленного заказа происходит при эмуляции оформления заказа. 
При оформлении заказа приложение обращается к сервису платежей для проверки достаточности средств и изменения баланса при успешном оформлении заказа. 
Страница доступна только зарегистрированным пользователям.

## Страница добавления товара
На странице добавления товара необходимо заполнить поля с информацией о товаре:
* название,
* картинка,
* описание товара,
* цена товара.
Страница доступна только администратору (пользователь с ролью ADMIN). Для создания администратора необходимо:
* зарегистрировать нового пользователя (например, с именем 'admin') и
* изменить его роль на 'ROLE_ADMIN' (update users set roles = 'ROLE_ADMIN' where login='admin';)</br>

## Страница регистрации
На странице регистрации необходимо указать:
* логин,
* пароль,
пользователя.
Страница доступна зарегистрированным и незарегистрированным пользователям.</br>

## _Структура проекта_
> Spring Framework<br>
> Java: 21<br>
> СУБД PostgreSQL: 17.5<br>

### ER diagram

![shop_diagram](shop.png)

## _Запуск приложения_
Приложение можно запустить:<br>
* локально<br>
_java -jar build/libs/shop-0.0.2-SNAPSHOT.jar_
_java -jar build/libs/payments-api-0.0.2-SNAPSHOT.jar_
_Локальные СУБД PostrgeSQL17, Redis, Keycloak (экспорт realm - realm-export.json)
* в Docker-контейнере<br>
_docker-compose up -d --build_